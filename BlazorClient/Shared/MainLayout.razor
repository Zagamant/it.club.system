@using BlazorClient.Services.AccountManagement
@inherits LayoutComponentBase
@inject IAccountService AccountService
@inject NavigationManager NavigationManager

@if (LoggedIn)
{

    <!--nav-->
    <Bar Breakpoint="Breakpoint.Desktop"
         Background="Background.White"
         ThemeContrast="ThemeContrast.Light">

        <BarBrand Style="border:none;">
            <div class="home">
                <b>It_Club</b>
            </div>
        </BarBrand>
        <BarMenu >
            <BarStart Style="font-size:170%">

                <BarItem Style="margin-left:82px">
                    <BarLink To="users">Список челбосо</BarLink>
                </BarItem>

                <BarItem>
                    <BarLink To="groups">Cписок групп</BarLink>
                </BarItem>

                <BarItem>
                    <BarLink To="#">Оплата</BarLink>
                </BarItem>

                <BarItem>
                    <BarLink To="#">Выход</BarLink>
                </BarItem>

                <BarItem Style="float:right">

                    <BarLink To="/users/{id:int}">
                        <img class="user-image" src="/assets/images/User (1).svg" />
                        @($"{AccountService.User.Name} {AccountService.User.Surname} ")
                    </BarLink>

                </BarItem>
            </BarStart>
        </BarMenu>
    </Bar>
    <!--</nav>-->

<div class="sider">
    <!--Sidebar-->
    <Sidebar @ref="sidebar">
        <SidebarContent>
            <SidebarBrand>
                <a href="">Список групп</a>
            </SidebarBrand>
            <SidebarNavigation>
                <SidebarItem>
                    <SidebarLink To="" Title="Дворец">
                        <Icon Name="IconName.Home" Margin="Margin.Is3.FromRight" />Дворец
                    </SidebarLink>
                </SidebarItem>
                <SidebarItem>
                    <SidebarLink To="" Title="Серебронск">
                        <Icon Name="IconName.Home" Margin="Margin.Is3.FromRight" />Серебронск
                    </SidebarLink>
                </SidebarItem>
                <SidebarItem>
                    <SidebarLink To="" Title="Двойное чикаго">
                        <Icon Name="IconName.Home" Margin="Margin.Is3.FromRight" />Двойное чикаго
                    </SidebarLink>
                </SidebarItem>
                <SidebarItem>
                    <SidebarLink To="" Title="Серебронск">
                        <Icon Name="IconName.Home" Margin="Margin.Is3.FromRight" />Серебронск
                    </SidebarLink>
                </SidebarItem>

            </SidebarNavigation>
        </SidebarContent>
    </Sidebar>

    <AlertCustom/>

    @Body

</div>
    <!--Sidebar-->


<div class="sider">
    <!--Sidebar-->
    <Sidebar @ref="sidebar">
        <SidebarContent>
            <SidebarBrand>
                <a href="">Blazorise Sidebar</a>
            </SidebarBrand>
            <SidebarNavigation>
                <SidebarLabel>Main</SidebarLabel>
                <SidebarItem>
                    <SidebarLink To="" Title="Home">
                        <Icon Name="IconName.Home" Margin="Margin.Is3.FromRight" />Home
                    </SidebarLink>
                </SidebarItem>
                <SidebarItem>
                    <SidebarLink Toggled="(isOpen)=> mailSidebarSubItems.Toggle(isOpen)" IsShow="true">
                        <Icon Name="IconName.Mail" Margin="Margin.Is3.FromRight" />Email
                    </SidebarLink>
                    <SidebarSubItem @ref="mailSidebarSubItems" IsShow="true">
                        <SidebarItem>
                            <SidebarLink To="email/inbox">Inbox</SidebarLink>
                        </SidebarItem>
                        <SidebarItem>
                            <SidebarLink To="email/compose">Compose Email</SidebarLink>
                        </SidebarItem>
                        @* other subitems *@
                    </SidebarSubItem>
                </SidebarItem>
                <SidebarItem>
                    <SidebarLink Toggled="(isOpen)=> appsSidebarSubItems.Toggle(isOpen)" IsShow="true">
                        <Icon Name="IconName.Smartphone" Margin="Margin.Is3.FromRight" />Apps
                    </SidebarLink>
                    <SidebarSubItem @ref="appsSidebarSubItems" IsShow="true">
                        <SidebarItem>
                            <SidebarLink To="apps/todo">Todo List</SidebarLink>
                        </SidebarItem>
                    </SidebarSubItem>
                </SidebarItem>
            </SidebarNavigation>
        </SidebarContent>
    </Sidebar>

    <AlertCustom />
    @Body
</div>
    <!--Sidebar-->


}

@code {
    private bool LoggedIn => AccountService.User != null;


    Sidebar sidebar;
    SidebarSubItem mailSidebarSubItems;
    SidebarSubItem appsSidebarSubItems;

    void ToggleSidebar()
    {
        sidebar.Toggle();
    }

}